# Custom set

[![codecov](https://codecov.io/github/Crotokot/custom-set-cpp/branch/main/graph/badge.svg?token=PQBADS1KZP)](https://codecov.io/github/Crotokot/custom-set-cpp)

В качестве основы для кастомного set исполльзовались красно-черные деревья с характерной для них балансировкой при добавлении/удалении элементов. Вся основная функциональность реализована для деревьев в файле **redblacktree.hpp**, сам **set** же является интерфейсом над фукционалом дерева. Файл **base_entities.hpp** содержит класс вершины дерева _Node_ и класс _RedBlackTreeHeader_, который предназначен для хранения некоторый информации о дереве: число вершин, указатель на корень и т.д.

Поле _header\__ класса _RedBlackTree_ содержит указатели на самый большой/маленький (_lchild_, _rchild_ соответственно) элементы дерева (благодаря чему можно за константное время получить _begin-iterator_) и его корень (_parent_). По совместительству _header\__ является _end_-итератором дерева. Каждая вершина дерева содержит указатели на двух своих потомков и указатель на своего родителя (корень в поле _parent_ хранит указатель на _header\__). Хранение указателя на родителя вершины позволяет без дополнительных усилий реализовать _bidiractional-iterator_. Для реализации обратного итератора использовались средства стандартной библиотеки си++: _std::reverse\_iterator_.

Файлы, связанные с реализацией всего функционала множества, имеют 100%-е тестовое покрытие (см. бейджик на **codecov**). Помимо тестов функциональности разработанных классов имеется сравнение времени работы с _std::set_ (сравнивается время работы операций вставки, удаления, поиска, а также инкрементирование и декрементирование итераторов). Лог со сравнением времени можно увидеть в CI, также он приводится ниже:

```cpp
Time comparison for different operations...
Insert operation:
	stl::Set: 343ns
	std::set: 759ns
Erase operation:
	stl::Set: 368ns
	std::set: 694ns
Iterator++ operation:
	stl::Set: 27ns
	std::set: 27ns
Iterator-- operation:
	stl::Set: 57ns
	std::set: 49ns
Find operation:
	stl::Set: 187ns
	std::set: 452ns
```
